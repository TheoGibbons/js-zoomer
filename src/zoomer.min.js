let Zoomer=function(e){return{init:function(){e(".zoomer-container").each(function(){let o=1,t=e(this),n=t.find("img"),i=.5,r=.5,l=!1,c=0,h=1;function a(){let e=t.width(),o=t.height(),i;return Math.min(e/n.width(),o/n.height())}function f(){let e;l&&(o=Math.min(20,Math.max(e=a(),o)),t.css({backgroundColor:o===e?"":"#f7f7f7"}),t.css({cursor:o===e?"zoom-in":"zoom-out"}),n.css({transform:"scale("+o+")"}),function e(){let l=t.width(),c=t.height(),h=n.width()*o,a=n.height()*o,f,u;if(i=Math.min(1,Math.max(0,i)),r=Math.min(1,Math.max(0,r)),a<=c)f=(c-a)/2;else{let m=c-a;f=m-(m+(0-m)*r)}if(h<=l)u=(l-h)/2;else{let s=l-h;u=s-(s+(0-s)*i)}n.css({top:f+"px",left:u+"px"})}())}t.off("mousemove.zoomer touchmove.zoomer").on("mousemove.zoomer touchmove.zoomer",function(e){e.preventDefault();let o=t.offset().left,n=t.offset().top,l,c;"mousemove"===e.type?(l=e.pageX-o,c=e.pageY-n):"touchmove"===e.type&&(l=e.originalEvent.touches[0].pageX-o,c=e.originalEvent.touches[0].pageY-n),i=l/t.width(),r=c/t.height(),f()}).off("click.zoomer").on("click.zoomer",function(e){e.preventDefault();let n=a(t);o=o===n?5:n,f()}).off("wheel.zoomer").on("wheel.zoomer",function(e){e.preventDefault();let t=e.originalEvent.deltaY||-e.originalEvent.detail;o*=t=t>0?.9:1.1,f()}).off("touchstart.zoomer").on("touchstart.zoomer",function(e){if(2===e.originalEvent.touches.length){let t=e.originalEvent.touches[0],n=e.originalEvent.touches[1];c=Math.sqrt(Math.pow(n.pageX-t.pageX,2)+Math.pow(n.pageY-t.pageY,2)),h=o}}).off("touchmove.zoomer").on("touchmove.zoomer",function(e){if(2===e.originalEvent.touches.length){let t=e.originalEvent.touches[0],n=e.originalEvent.touches[1];o=h*(Math.sqrt(Math.pow(n.pageX-t.pageX,2)+Math.pow(n.pageY-t.pageY,2))/c),f()}});let u=function(){l=!0,function e(){let o=t.width(),i=t.height(),r=n[0].naturalWidth,l=n[0].naturalHeight;o||t.css({width:(i?i*r/l:r)+"px"}),i||t.css({height:(o?o*l/r:l)+"px"})}(),f()};n[0].complete?u():n.on("load",u),e(window).resize(f)})}}}(jQuery);jQuery(Zoomer.init);